apiVersion: v1
kind: Service
metadata:
  name: etcd-client-service-lb
  namespace: default
  annotations:
    # Creates a VPC internal loadbalancer, only visible to VPS
    service.beta.kubernetes.io/aws-load-balancer-internal: 0.0.0.0/0
spec:
  ports:
  - name: client
    port: 2379
    protocol: TCP
    targetPort: 2379
  selector:
    etcd_cluster: etcd-cluster
  type: LoadBalancer
